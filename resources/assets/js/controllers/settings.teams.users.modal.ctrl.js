'use strict'
module.exports = function($modalInstance, team, $http) {
  var init
  this.newEmail = ''
  init = (function(_this) {
    return function() {
      return _this.team = angular.copy(team)
    }
  })(this)
  this.deleteUser = (function(_this) {
    return function(user) {
      if (!confirm("Remove this user from the team?")) {
        return
      }
      _.remove(_this.team.users, user)
      return $http["delete"]('/api/teams/user/' + team.id + '?user_id=' + user.id)
    }
  })(this)
  this.inviteEmail = (function(_this) {
    return function() {
      return $http.post('/api/teams/user', {
        email: _this.newEmail,
        team_id: _this.team.id
      }).success(function(data) {
        _this.team = data.team
        return _this.newEmail = ''
      })
    }
  })(this)
  this.ok = function() {
    return $modalInstance.close(this.team)
  }
  this.cancel = function() {
    return $modalInstance.dismiss('cancel')
  }
  init()
}

// ---
// generated by coffee-script 1.9.2
